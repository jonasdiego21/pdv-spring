<!DOCTYPE html>
<html 
	lang="pt-br"
	xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorator="'Index'">
    
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <title>PDV - PONTO DE VENDA</title>
</head>

<body>
	<div class="container" layout:fragment="conteudo">
		<h1 class="text-center">Pesquisar Venda</h1>
		
		<!-- Breadcrumb -->
		<div aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a th:href="@{/admin}">Dashboard</a></li>
				<li class="breadcrumb-item active" aria-current="page">Vendas</li>
				<li class="breadcrumb-item"><a th:href="@{/vendas/novo}">Novo</a></li>
			</ol>
		</div>
		
		<!-- Filtros -->
		<form class="row" method="GET" th:object="${vendaFilter}" th:action="@{/vendas}">
			<!-- busca -->	
			<div class="col-sm-8"></div>	
					
			<div class="col-sm-4">
				<div class="input-group mb-3">						 
					<select id="codigo" th:field="*{codigo}" class="form-control-select">
						<option th:each="cliente : ${clientes}" th:text="|${cliente.codigo} - ${cliente.nome}|" th:value="${cliente.codigo}"></option>
					</select>
					 
					<div class="input-group-append">
						<button id="btnBuscar" class="btn btn-primary" type="submit">
							<i class="fas fa-search"></i>
						</button> 
					</div>
				</div>
			</div>
		</form>
		
		<!-- Table -->
		<div class="row">
			<div class="col-sm-12 table-responsive">
				<table class="table table-hover thead-light table-bordered">
					<thead>
						<tr>
							<th style="width: 10%;">Código <i class="fas fa-angle-down"></i></th>
							<th style="width: 15%;" class="text-center">Data da venda<i class="fas fa-angle-down"></i></th>
							<th style="width: 35%;">cliente <i class="fas fa-angle-down"></i></th>
							<th style="width: 20%;" class="text-center">Status <i class="fas fa-angle-down"></i></th>
							<th style="width: 20%;" class="text-center">Valor Total <i class="fas fa-angle-down"></i></th>
							<!--<th style="width: 10%;" colspan="2" class="text-center">Ações <i class="fas fa-angle-down"></th>-->
						</tr>
					</thead>
					<tbody>
						<tr th:each="venda : ${pagina.content}">
							<td class="text-center" th:text="${venda.codigo}"></td>
							<td class="text-center">[[${{venda.dataCriacao}}]]</td>
							<td th:text="${venda.cliente.nome}"></td>
							<td class="text-center">
								<span th:text="${venda.status.descricao}" th:if="${venda.status.descricao == 'ORÇAMENTO'}"
									th:class="${venda.status.descricao == 'ORÇAMENTO'} ? 'badge badge-warning p-2' : ''">
								</span>
								
								<span th:text="${venda.status.descricao}" th:if="${venda.status.descricao == 'EMITIDA'}"
									th:class="${venda.status.descricao == 'EMITIDA'} ? 'badge badge-success p-2' : ''">
								</span>
								
								<span th:text="${venda.status.descricao}" th:if="${venda.status.descricao == 'CREDIÁRIO'}"
									th:class="${venda.status.descricao == 'CREDIÁRIO'} ? 'badge badge-primary p-2' : ''">
								</span>
								
								<span th:text="${venda.status.descricao}" th:if="${venda.status.descricao == 'CANCELADA'}"
									th:class="${venda.status.descricao == 'CANCELADA'} ? 'badge badge-danger p-2' : ''">
								</span>
							</td>
							<td class="text-center text-danger"><b>R$ [[${{venda.valorTotal}}]]</b></td>
							<!--
							<td class="text-center">
								<a th:href="@{/vendas/emitir}" data-toggle="tooltip" title="EMITTIR" data-position="top">
									<i class="fas fa-check-circle"></i>
								</a>
							</td>
							<td class="text-center" data-toggle="tooltip" title="CANCELAR" data-position="top"> 
								<a href="javascript:;" class="js-btn-excluir" th:url="@{|/vendas/cancelar|}">
									<i class="fas fa-ban text-danger"></i>
								</a>
							</td>
							-->
						</tr>
						
						<tr th:if="${#lists.isEmpty(pagina.content)}"> 
							<td colspan="5" class="text-center">Nenhuma informação encontrado!</td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<!-- Paginação -->
			<div class="col-sm-12" th:if="${not #lists.isEmpty(pagina.content)}">
				<nav>
				  <ul class="pagination pagination-sm justify-content-center" th:with="paginaAtual=${pagina.number}">
				    <li th:class="${pagina.first} ? 'page-item disabled'" class="page-item">
				    	<a class="page-link" th:href="|?page=${paginaAtual - 1}|">
				    		<i class="fas fa-chevron-left"></i>
				    	</a>
				    </li>
				    
				    <th:block th:each="p : ${#numbers.sequence(1, pagina.totalPages)}" th:with="numeroPagina=${p - 1}">
					    <li class="page-item" th:class="${paginaAtual == numeroPagina} ? 'page-item active'">
					    	<a class="page-link" th:href="|?page=${numeroPagina}|">[[${p}]]</a>
					    </li>
				    </th:block>
				    
				    <li class="page-item" th:class="${pagina.last} ? 'page-item disabled'">
				    	<a class="page-link" th:href="|?page=${paginaAtual + 1}|">
				    		<i class="fas fa-chevron-right"></i>
				    	</a>
				    </li>
				  </ul>			
				</nav>
			</div>
		</div>
	</div>
	
  	<!-- JavaScript -->
  	<th:block layout:fragment="javascripts">
  	<script th:src="@{vendor/sweetalert/sweetalert.min.js}"></script>
  	<script th:src="@{js/pdv.dialogo-excluir.js}"></script>
  	</th:block>
  	
  	<script>
	$(document).ready(function(){
	  $('[data-toggle="tooltip"]').tooltip();
	});
	</script>
</body>
</html>